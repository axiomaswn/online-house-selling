<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Vue Demo</title>
  </head>
  <body>
    <div id="root">
      <h1>{{ title }}</h1>
      <input type="text" name="todo" v-model="newTodo">
      <button type="button" name="add" v-on:click="addTodo">Add Todo</button>
      <ol>
        <li v-for='item in todos'>{{ item }} <button type="button" name="button" v-on:click='deleteTodo(item)'>x</button></li>
      </ol>
    </div>
  </body>
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script type="text/javascript">
    var app = new Vue({
      el: '#root',
      data: {
        index: '',
        title: 'Ini Todo',
        newTodo: '',
        todos: []
      },
      methods: {
        loadTodo: function() {
          this.todos = localStorage.getItem('todos').split(',')
        },
        addTodo: function() {
          this.todos.push(this.newTodo);
          this.updateLocal();
        },
        updateLocal: function() {
          localStorage.setItem('todos', this.todos)
        }
        ,
        setIndex: function(idx) {
          var indexTodo = this.todos.indexOf(idx)
          this.index = indexTodo
        },
        deleteTodo: function(idx) {
          this.setIndex(idx)
          this.todos.splice(this.index, 1)
          this.updateLocal()
        }
      }
    })
    app.loadTodo();
  </script>
</html>
